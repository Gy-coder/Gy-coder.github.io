<!DOCTYPE html>
<html lang="en-Hans">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    
    <title>Gy的个人网站  | JQuery设计模式</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="generator" content="Hugo 0.59.1" />
    
    
      <META NAME="ROBOTS" CONTENT="NOINDEX, NOFOLLOW">
    

    
    
      <link href="/dist/css/app.d98f2eb6bcd1eaedb7edf166bd16af26.css" rel="stylesheet">
    

    

    
      
    

    
    
    <meta property="og:title" content="JQuery设计模式" />
<meta property="og:description" content="jQuery简介 jQuery是目前使用最广泛的javascript函数库。
据统计，全世界排名前100万的网站，有46%使用jQuery，远远超过其他库。微软公司甚至把jQuery作为他们的官方库。
jQuery的设计思路  jQuery(选择器)用于获取相应的元素 但它不返回这些元素，而是返回一个对象 这个对象称作为jQuery对象，jQuery对象可以操作相应的元素  jQuery部分实现 window.$ = window.jQuery = function(selectorOrArrayOrTemplate){ let elements //element是个DOM数组 if(typeof selectorOrArrayOrTemplate === &#39;string&#39;){ if(selectorOrArrayOrTemplate[0] === &#39;&lt;&#39;){ // 如果参数是标签字符串就创建DOM对象 elements = [createElement(selectorOrArrayOrTemplate)] }else{ // 如果是选择器就查询 elements = document.querySelectorAll(selectorOrArrayOrTemplate) } }else if(selectorOrArrayOrTemplate instanceof Array){ elements = selectorOrArrayOrTemplate } function createElement(string){ let container = document.createElement(&#39;template&#39;) container.innerHTML = string.trim() return container.content.firstChild } // 以上是初始化elements的内容 const api = Object.create(jQuery.prototype) Object.assign(api,{ elements:elements, oldApi:selectorOrArrayOrTemplate }) // 创建jQuery对象 return api } $." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://gy-coder.xyz/posts/jquery%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" />
<meta property="article:published_time" content="2020-01-31T16:46:18+08:00" />
<meta property="article:modified_time" content="2020-01-31T16:46:18+08:00" />
<meta itemprop="name" content="JQuery设计模式">
<meta itemprop="description" content="jQuery简介 jQuery是目前使用最广泛的javascript函数库。
据统计，全世界排名前100万的网站，有46%使用jQuery，远远超过其他库。微软公司甚至把jQuery作为他们的官方库。
jQuery的设计思路  jQuery(选择器)用于获取相应的元素 但它不返回这些元素，而是返回一个对象 这个对象称作为jQuery对象，jQuery对象可以操作相应的元素  jQuery部分实现 window.$ = window.jQuery = function(selectorOrArrayOrTemplate){ let elements //element是个DOM数组 if(typeof selectorOrArrayOrTemplate === &#39;string&#39;){ if(selectorOrArrayOrTemplate[0] === &#39;&lt;&#39;){ // 如果参数是标签字符串就创建DOM对象 elements = [createElement(selectorOrArrayOrTemplate)] }else{ // 如果是选择器就查询 elements = document.querySelectorAll(selectorOrArrayOrTemplate) } }else if(selectorOrArrayOrTemplate instanceof Array){ elements = selectorOrArrayOrTemplate } function createElement(string){ let container = document.createElement(&#39;template&#39;) container.innerHTML = string.trim() return container.content.firstChild } // 以上是初始化elements的内容 const api = Object.create(jQuery.prototype) Object.assign(api,{ elements:elements, oldApi:selectorOrArrayOrTemplate }) // 创建jQuery对象 return api } $.">


<meta itemprop="datePublished" content="2020-01-31T16:46:18&#43;08:00" />
<meta itemprop="dateModified" content="2020-01-31T16:46:18&#43;08:00" />
<meta itemprop="wordCount" content="146">



<meta itemprop="keywords" content="" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="JQuery设计模式"/>
<meta name="twitter:description" content="jQuery简介 jQuery是目前使用最广泛的javascript函数库。
据统计，全世界排名前100万的网站，有46%使用jQuery，远远超过其他库。微软公司甚至把jQuery作为他们的官方库。
jQuery的设计思路  jQuery(选择器)用于获取相应的元素 但它不返回这些元素，而是返回一个对象 这个对象称作为jQuery对象，jQuery对象可以操作相应的元素  jQuery部分实现 window.$ = window.jQuery = function(selectorOrArrayOrTemplate){ let elements //element是个DOM数组 if(typeof selectorOrArrayOrTemplate === &#39;string&#39;){ if(selectorOrArrayOrTemplate[0] === &#39;&lt;&#39;){ // 如果参数是标签字符串就创建DOM对象 elements = [createElement(selectorOrArrayOrTemplate)] }else{ // 如果是选择器就查询 elements = document.querySelectorAll(selectorOrArrayOrTemplate) } }else if(selectorOrArrayOrTemplate instanceof Array){ elements = selectorOrArrayOrTemplate } function createElement(string){ let container = document.createElement(&#39;template&#39;) container.innerHTML = string.trim() return container.content.firstChild } // 以上是初始化elements的内容 const api = Object.create(jQuery.prototype) Object.assign(api,{ elements:elements, oldApi:selectorOrArrayOrTemplate }) // 创建jQuery对象 return api } $."/>

  </head>

  <body class="ma0 avenir bg-near-white">

    
   
  

  <header>
    <div class="bg-black">
      <nav class="pv3 ph3 ph4-ns" role="navigation">
  <div class="flex-l justify-between items-center center">
    <a href="https://gy-coder.xyz/" class="f3 fw2 hover-white no-underline white-90 dib">
      Gy的个人网站
    </a>
    <div class="flex-l items-center">
      

      
      











    </div>
  </div>
</nav>

    </div>
  </header>



    <main class="pb7" role="main">
      
  
  <article class="flex-l flex-wrap justify-between mw8 center ph3">

    <header class="mt4 w-100">
      <p class="f6 b helvetica tracked">
          
        POSTS
      </p>
      <h1 class="f1 athelas mb1">JQuery设计模式</h1>
      
      
      <time class="f6 mv4 dib tracked" datetime="2020-01-31T16:46:18&#43;08:00">January 31, 2020</time>
      
      
    </header>

    <section class="nested-copy-line-height lh-copy serif f4 nested-links nested-img mid-gray pr4-l w-two-thirds-l">

<h1 id="jquery简介">jQuery简介</h1>

<p>jQuery是目前使用最广泛的javascript函数库。</p>

<p>据统计，全世界排名前100万的网站，有46%使用jQuery，远远超过其他库。微软公司甚至把jQuery作为他们的官方库。</p>

<h1 id="jquery的设计思路">jQuery的设计思路</h1>

<ol>
<li>jQuery(选择器)用于获取相应的元素</li>
<li>但它不返回这些元素，而是返回一个对象</li>
<li>这个对象称作为jQuery对象，jQuery对象可以操作相应的元素</li>
</ol>

<h1 id="jquery部分实现">jQuery部分实现</h1>

<pre><code class="language-JavaScript">window.$ = window.jQuery = function(selectorOrArrayOrTemplate){
    let elements    //element是个DOM数组
    if(typeof selectorOrArrayOrTemplate === 'string'){
        if(selectorOrArrayOrTemplate[0] === '&lt;'){
            // 如果参数是标签字符串就创建DOM对象
            elements = [createElement(selectorOrArrayOrTemplate)]
        }else{
            // 如果是选择器就查询
            elements = document.querySelectorAll(selectorOrArrayOrTemplate)
        }
    }else if(selectorOrArrayOrTemplate instanceof Array){
        elements = selectorOrArrayOrTemplate
    }
    function createElement(string){
        let container = document.createElement('template')
        container.innerHTML = string.trim()
        return container.content.firstChild
    }
    // 以上是初始化elements的内容

    const api = Object.create(jQuery.prototype)
    Object.assign(api,{
        elements:elements,
        oldApi:selectorOrArrayOrTemplate
    })
    // 创建jQuery对象
    return api
}

$.fn = jQuery.prototype = {
    constructor : jQuery,
    jquery : true,
    each(){
        for(let i = 0;i &lt; this.elements;length;i++){
            fn.call(null,this.elements[i])
        }
    },
    addClass(className){
        // 内部访问外部的变量，用到了闭包
       for(let i = 0;i &lt; this.elements.length;i++){
           this.elements[i].classList.add(className)
       }
       return this
    },
    find(selector){
        let array = []
        this.each((el)=&gt;{
            array= array.concat(Array.from(el.querySelectorAll(selector)))
            // 在当前每个元素下获取selector元素并将其转化为数组，然后拼接到array中
        })
        array.oldApi = this   //this是旧的api
        return jQuery(array)
    },
    end(){
        return this.oldApi   //this是新的api
    }
}
</code></pre>

<p><a href="https://github.com/Gy-coder/JQuery-demo-1/blob/master/src/jQuery.js">更多的实现请点击</a></p>

<h1 id="jquery对象">jQuery对象</h1>

<p>jQuery对象是指jQuery函数所构造出来的对象，不是jQuery这个对象</p>

<h1 id="jquery对象的命名规则">jQuery对象的命名规则</h1>

<p>用$开头的变量都是jQuery对象</p>

<pre><code class="language-JavaScript">const $div = $('div#test')
</code></pre>

<p>$div并不是DOM对象，而是jQuery对象</p>

<h1 id="jquery实现所用到的设计模式">jQuery实现所用到的设计模式</h1>

<ol>
<li>不用new的构造函数，这个模式没有专门的名字</li>
<li>$支持多种参数，这个名字叫做重载</li>
<li>用闭包隐藏各种细节，这个模式也没有专门的名字</li>
<li>$div.text()既可读也可写，getter/setter</li>
<li>$.fn是$.prototype的别名，这叫别名</li>
<li>jQuery针对不同的浏览器使用不同的代码，这叫适配器</li>
</ol>
<ul class="pa0">
  
</ul>
<div class="mt6">
      
      
      </div>
    </section>

    <aside class="w-30-l mt6-l">




</aside>

  </article>

    </main>
    <footer class="bg-black bottom-0 w-100 pa3" role="contentinfo">
  <div class="flex justify-between">
  <a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href="https://gy-coder.xyz/" >
    &copy; 2020 Gy的个人网站
  </a>
    <div>










</div>
  </div>
</footer>

    

  <script src="/dist/js/app.3fc0f988d21662902933.js"></script>


  </body>
</html>
